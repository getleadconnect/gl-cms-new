<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews -Indexes
    </IfModule>

    RewriteEngine On

    # ----------------------------------------------------
    # Handle Authorization Header
    # ----------------------------------------------------
    RewriteCond %{HTTP:Authorization} .
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

    # ----------------------------------------------------
    # Force www to non-www
    # ----------------------------------------------------
    RewriteCond %{HTTP_HOST} ^www\.getleadcrm\.com [NC]
    RewriteRule ^(.*)$ https://getleadcrm.com/$1 [R=301,L]

    # ----------------------------------------------------
    # Redirect specific URLs
    # ----------------------------------------------------

    # Redirect /download to /crm-mobile-app
    RewriteRule ^download/?$ /crm-mobile-app [R=301,L]

    # Old typo redirect (kept from your file)
    RewriteRule ^downlad/?$ https://getleadcrm.com/crm-mobile-app [R=301,L]

    # Redirect uppercase /CRM to homepage
    RewriteRule ^CRM/?$ / [R=301,L]

    # Redirect old blog URLs that 404
    RewriteRule ^blog/crm/?$ /blog [R=301,L]
    RewriteRule ^blog/understanding-whatsapp-channels-how-to-create-and-join/?$ /blog [R=301,L]

    # ----------------------------------------------------
    # Remove trailing slash if not a directory
    # ----------------------------------------------------
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} (.+)/$
    RewriteRule ^ %1 [R=301,L]

    # ----------------------------------------------------
    # Blog routing
    # ----------------------------------------------------
    RewriteCond %{REQUEST_URI} ^/blog
    RewriteRule ^blog(/.*)?$ blog/index.php [L]

    # ----------------------------------------------------
    # Send requests to front controller
    # ----------------------------------------------------
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]

</IfModule>

